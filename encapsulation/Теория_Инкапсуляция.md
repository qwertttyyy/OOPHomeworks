
# Теория урока: Инкапсуляция

---

## Что такое инкапсуляция и зачем она нужна?

### Определение инкапсуляции:

- **Инкапсуляция** — это способ **скрыть внутренние данные объекта** и предоставить доступ к ним только через методы. 
- Это помогает **защитить данные** от случайного или намеренного изменения.

### Пример из жизни:

Представьте, что у нас есть **банковский счет**. Мы можем снимать деньги через банкомат или банк, но не имеем прямого доступа к базе данных, где хранятся наши деньги. Банк предоставляет нам доступ к данным через **контролируемые интерфейсы**.

### Зачем нужна инкапсуляция?

- Инкапсуляция помогает **изолировать данные** и управлять доступом к ним.
- Она позволяет контролировать, как данные изменяются и используются, предотвращая ошибки и защищая данные.

---

## Публичные, защищенные и приватные атрибуты

### Публичные атрибуты

- **Публичные атрибуты** доступны всем и могут изменяться как внутри класса, так и за его пределами.
- Используются, когда данные **не требуют особой защиты**.

#### Пример

В классе `Car` можно создать публичный атрибут `color`, чтобы у каждой машины можно было менять цвет.

```python
class Car:
    def __init__(self, color):
        self.color = color  # Публичный атрибут

car = Car("красный")
print(car.color)  # красный
car.color = "синий"  # можем изменить цвет
print(car.color)  # синий
```

---

### Защищенные атрибуты и методы

- **Защищенные атрибуты** помечаются одним подчеркиванием (`_attribute`). Эти атрибуты **не предназначены для внешнего использования**, но доступны в подклассах.
- **Защищенные методы** также обозначаются одним подчеркиванием и могут использоваться в подклассах для вспомогательных операций.

#### Когда использовать защищенные атрибуты и методы

- Защищенные атрибуты полезны, когда данные **не должны быть доступны напрямую**, но могут использоваться в подклассах.
- Защищенные методы применяются для **вспомогательных операций**, нужных классу или его потомкам.

#### Пример

В классе `Employee` защищенный атрибут `_salary` хранит зарплату. Этот атрибут доступен только внутри класса и его подклассов.

```python
class Employee:
    def __init__(self, name, salary):
        self.name = name
        self._salary = salary  # защищенный атрибут

    def _calculate_bonus(self):  # защищенный метод
        return self._salary * 0.1

class Manager(Employee):
    def show_bonus(self):
        bonus = self._calculate_bonus()
        print(f"Бонус для {self.name}: {bonus}")

employee = Employee("Иван", 50000)
manager = Manager("Ольга", 70000)
manager.show_bonus()  # Используем защищенный метод
```

---

### Приватные атрибуты и методы

- **Приватные атрибуты** обозначаются двумя подчеркиваниями (`__attribute`) и **полностью скрыты** для внешнего доступа.
- **Приватные методы** также имеют два подчеркивания и доступны только внутри самого класса.

#### Когда использовать приватные атрибуты и методы

- Приватные атрибуты нужны для данных, которые должны быть **полностью скрыты**.
- Приватные методы используются для функций, которые не должны быть доступны из других классов или подклассов.

#### Пример

В классе `BankAccount` приватный атрибут `__balance` хранит баланс счета, а приватный метод `__calculate_interest()` рассчитывает проценты.

```python
class BankAccount:
    def __init__(self, owner, balance):
        self.owner = owner
        self.__balance = balance  # приватный атрибут

    def deposit(self, amount):
        if amount > 0:
            self.__balance += amount
            print(f"Сумма {amount} добавлена на счет")
        else:
            print("Сумма для депозита должна быть положительной")

    def get_balance(self):  # геттер для баланса
        return self.__balance

    def __calculate_interest(self):  # приватный метод
        return self.__balance * 0.05

account = BankAccount("Анна", 1000)
print(account.get_balance())  # 1000
account.deposit(500)  # Сумма 500 добавлена на счет
print(account.get_balance())  # 1500
```

---

## Геттеры и сеттеры

### Что такое геттеры и сеттеры

- **Геттеры** — методы для получения значения приватного атрибута.
- **Сеттеры** — методы для изменения значения приватного атрибута.
- Они помогают **контролировать доступ** к данным и проверять корректность значений при их изменении.

#### Пример с геттерами и сеттерами

В классе `Product` приватный атрибут `__price` используется для хранения цены товара, а геттер и сеттер проверяют корректность значения.

```python
class Product:
    def __init__(self, name, price):
        self.name = name
        self.__price = price  # приватный атрибут

    def get_price(self):  # геттер
        return self.__price

    def set_price(self, price):  # сеттер
        if price > 0:
            self.__price = price
            print(f"Цена товара '{self.name}' изменена на {price}")
        else:
            print("Цена должна быть положительной")

product = Product("Ноутбук", 50000)
print(product.get_price())  # 50000
product.set_price(55000)  # Цена товара 'Ноутбук' изменена на 55000
print(product.get_price())  # 55000
product.set_price(-100)  # Цена должна быть положительной
```

В примере геттер `get_price()` и сеттер `set_price()` контролируют доступ и изменение цены, предотвращая установку некорректных значений.

---
